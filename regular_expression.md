# 正規表現
前提として、方言とも言うべき言語での差が存在する。

- 正規表現チェックツール(jsでやる)
https://regex101.com

## 単語

```
/[a-z0-9]+/im
```

- デリミタ : /
-　修飾子  :  im
- メタ文字 : [] , ^



## ルール

- 角カッコ[] : 一文字分の文字または数字を指定する。


例
```
gr[ae]y
```

マッチ
```
gray,grey
```

- キャロット^ : キャロットで指定した文字以外をマッチする。

例
```
gr[^ae]y

```

マッチ
```
gr2y,gruy
```

NOマッチ
```
gray,grey
```

- ハイフン-　: 指定した範囲分マッチさせる


例
```
gr[a-z]y

```

マッチ
```
gray,gray,grey,gruy
```

NOマッチ
```
gr2y
```

- バックスラッシュ\ : 次の文字がメタ文字でも指定できるようにする.単なる文字として扱う。

例
```
gr[\[]]y

```

マッチ
```
gr[y
```

NOマッチ
```
gray,gr2y
```


- ワイルドカード. : 何でもよし



例
```
gr.y

```

マッチ
```
gr[y,gray,gr2y
```

NOマッチ
```
gr22y
```

- パイプ| : OR　と同じ意味

例
```
black|white

```

マッチ
```
black,white
```

NOマッチ
```
gray
```

- 丸括弧() : 正規表現をグループ化する

例
```
whi(t|i)e
```

マッチ
```
white,whiie
```

NOマッチ
```
black,
```

- プラス+ : 1回以上の繰り返しの前に置く


例
```
ye.+ow
```

マッチ
```
yellow,yelow
```

NOマッチ
```
yeow
```

- アスタリスク* : 0回以上の繰り返し


例
```
ye.*ow
```

マッチ
```
yellow,yelow,yeow
```

NOマッチ
```
black

```

- クエスチョンマーク? : 入力なしか1文字のみ(+の真逆)


例
```
ye.?ow
```

マッチ
```
yelow, yeow,
```

NOマッチ
```
yellow,

```

- 波括弧 {} : 繰り返しのパターンを記述

{n}=n回の繰り返し
{n,}= n回以上の繰り返し
{n,m}= n回以上、m回以下の繰り返し


例
もとの文
```
 We take one step forward , and two steps back.
```

```
one.{0,}
```

マッチ
```
one step forward , and two steps back.
```

```
one.{0,3}
```

```
one st
```

- ^ :　行頭
- $ : 行末
- \b : スペースや改行による単語の区切り(英単語用)
- \B : \b以外の単語の区切り

- \d : 半角数字、[0-9]
- \D : 半角数字以外をすべて対象にする、[^0-9]
- \w : 半角英数字とアンダースコア、[a-zA-Z0-9_]
- \W : 半角英数字とアンダースコア以外、特殊文字など、[^a-zA-Z0-9_]

- \n : 改行
- \t : タブ
- \r : リターン
- \f : 改ページ
- \s : 改行・タブ・リターン・改ページ・半角スペース、[\n\t\r\f ]
- \s : 改行・タブ・リターン・改ページ・半角スペース以外、[^\n\t\r\f]

## 修飾子

- g :global ,マッチする結果すべてを修飾

- i : (case-insensitive)大文字と小文字を区別しない

- m : multiline ^と$が対象にするのは1行目のみだが、2行目以降も以降も対象とする(gと併用することが多い)


## デリミタ
分けるやつ。普通は/が多い。

## 日本語

- ひらがな : [あーん],[\u3041-\u3096],[\x{3041}-\x{3096}]

- カタカナ : [ア-ケ],[\u30A1-\u30FA],[\x{30A1}-\x{30FA}]

- 漢字 : [亜-熙],々〇〻\u3400-\u9FFF\uF900-\uFAFF]|[\uD840-\uD87F][\uDC00-\uDFFF],[々〇〻\x{3400}-\x{9FFF}\x{F900}-\x{FAFF}]|[\x{D840}-\x{D87F}][\x{DC00}-\x{DFFF}]

- 半角文字以外 : [^\x01-\x7E]

## 便利な例

- htmlからdivタグ部分のみを抽出

タグ>以外を繰り返し
```
<div[^>]+>
```

- IPアドレスを抜き出す

```


```

- 電話番号

    - フリーダイヤル(0120-00-0000,0120-000-000)
    - 市外局番(000-000-0000,00-0000-0000,0000-00-0000)
    - 携帯電話(000-0000-0000)
    を対象にする。

フリーダイヤル
```
0120-((\d{2}-\d{4})|(\d{3}-\d{3}))

```
市外局番

```
\d{2,4}-\d{2,4}-d{4}
```

携帯番号

```
(090|080|070)-\d{4}-\d{4}
```



- URL
?であってもなくてもよいsを表現

\w : 文字と数字


/%&$#?()=~+- : URLにふくまれそうな文字


```
http[s]?:\/\/[\w/%&$#?()=~+-]+

```

- メールアドレス
[\w-]+ : @より前

([\w-]+\.)+　: ドメインの識別子の前

ドメインの識別子 : [a-zA-Z]{2,}

```
[\w-]+@([\w-]+\.)+[a-zA-Z]{2,}

```

- JSによる文字選択

```
var reg = new RegExp(/\d+/)
reg.exec("検索対象の文字列")

```